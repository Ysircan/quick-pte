.map{
  position:relative;
  width:min(860px, calc(100vw - 80px));
  height:min(1040px, calc(100vh - 140px));
  margin:0 auto;

  background:#b7b3a8;
  border-radius:14px;
  overflow:hidden;

  box-shadow: 0 0 30px rgba(0,0,0,.35);
}

/* svg 必须绝对铺满，否则比例一变线就“挤” */
.svg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  pointer-events:none;
}

.edge{
  stroke: rgba(17,17,17,.55);
  stroke-width: 3.2;
  stroke-dasharray: 6 10;
  stroke-linecap: round;
}

.edgeActive{
  stroke: #ffd766;
  stroke-width: 4.2;
  filter: drop-shadow(0 0 6px rgba(255,215,102,.7));
}

/* 顶部信息条：居中胶囊 */
.hpBar{
  position:absolute;
  top:14px;
  left:50%;
  transform:translateX(-50%);
  z-index:5;

  display:inline-flex;
  align-items:center;
  gap:10px;

  padding:8px 14px;
  border-radius:999px;
  background:rgba(0,0,0,.55);
  color:#fff;

  font-weight:800;
  letter-spacing:.02em;

  box-shadow: 0 10px 26px rgba(0,0,0,.35);
  backdrop-filter: blur(6px);
}

.hpBarSmall{
  font-size:12px;
  opacity:.85;
  font-weight:700;
}

/* 节点：给一个默认实体壳，具体颜色交给 physicalNodeStyle 覆盖 */
.node{
  position:absolute;
  width:36px;
  height:36px;
  border-radius:999px;
  transform:translate(-50%,-50%);
  cursor:pointer;
  user-select:none;

  border:3px solid #111;
  box-shadow: 6px 6px 0 rgba(0,0,0,.32);
  background: radial-gradient(circle at 35% 30%, rgba(255,255,255,.85), rgba(0,0,0,.08) 60%, rgba(0,0,0,.18) 100%);
}

.boss{
  width:54px;
  height:54px;
}

/* 状态 */
.nodeActive{
  filter: drop-shadow(0 0 14px rgba(255,215,102,.6));
}

.nodeChosen{
  outline: 4px solid rgba(255,215,102,.95);
  outline-offset: 2px;
}

.nodeVisited{
  opacity:.65;
}

.nodeDisabled{
  opacity:.30;
  pointer-events:none;
}

.nodeFuture{
  opacity:.78;
}

/* 底部按钮条 */
.foot{
  position:absolute;
  left:50%;
  bottom:14px;
  transform:translateX(-50%);
  z-index:5;

  display:flex;
  align-items:center;
  gap:8px;

  color:rgba(0,0,0,.7);
  font-weight:800;
}

.footBtn{
  width:34px;
  height:28px;
  border-radius:8px;
  border:2px solid rgba(0,0,0,.45);
  background:rgba(255,255,255,.28);
  cursor:pointer;

  box-shadow: 3px 3px 0 rgba(0,0,0,.25);
}

.locked{
  opacity:.35;
  cursor:not-allowed;
}

.legend{
  margin-left:10px;
  font-size:12px;
  opacity:.75;
  font-weight:800;
  letter-spacing:.04em;
}
